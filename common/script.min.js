var order=window.order||{},kitchen=window.kitchen||{},analytics=window.analytics||{},drinkOrder,drinkButton,orderButtons,socket,roomLink,socketHost,totalNumDrinks,selectedDrink,addPersonTxt,drinkHtml="",message="",socketHost="",socket="",drinkOrderArray=[],drinkListArray=[],teaListArray=[],milkListArray=[],kitchenOrder={},categoryGA,actionGA,labelGA;$(document).ready(function(){socketHost=($("body").hasClass("dev"),"http://localhost"),socket=io.connect(socketHost),$("body").hasClass("order")&&(order.init(),orderButtons='<div class="orderButton"><p class="actionLinks"><a href="#" class="delete-drink"><i class="fa fa-trash"> </i></a></p></div>'),$("body").hasClass("kitchen")&&kitchen.init(),function(a,b,c){if(c in b&&b[c]){var d,e=a.location,f=/^(a|html)$/i;a.addEventListener("click",function(a){for(d=a.target;!f.test(d.nodeName);)d=d.parentNode;"href"in d&&(d.href.indexOf("http")||~d.href.indexOf(e.host))&&(a.preventDefault(),e.href=d.href)},!1)}}(document,window.navigator,"standalone")}),analytics={event:function(a,b,c){console.log("GA ",a,b,c),socket.emit("analytics",{Category:a,Action:b,Label:c})}},order={init:function(){totalNumDrinks=0,socket.on("start",function(a){drinkListArray=a.drinks,teaListArray=a.tea,milkListArray=a.milk,drinkOrder=order.buildDrinkObj(drinkListArray),console.log("drinkOrder",drinkOrder),order.build()}),$("#drinkList").hide(),$("#listToggle").hide(),$("#listTab").on("click",function(){$(this).hasClass("active")||(order.tabToggle($(this).attr("id")),categoryGA="Button",actionGA="Nav",labelGA="List Tab",analytics.event(categoryGA,actionGA,labelGA))}),$("#drinksTab").on("click",function(){$(this).hasClass("active")||(order.tabToggle($(this).attr("id")),categoryGA="Button",actionGA="Nav",labelGA="Drinks Tab",analytics.event(categoryGA,actionGA,labelGA))}),$("button.done").on("click",function(){order.sendOrder(drinkOrderArray)}),$("button.addMessage").on("click",function(){order.addMessage()}),$("#side-nav-button").on("click",function(){order.sideNav()}),$("#leftMenu a").on("click",function(){categoryGA="Button",actionGA="Nav",labelGA=$(this).text(),analytics.event(categoryGA,actionGA,labelGA)}),roomLink=$("header").attr("class"),socket.on("orderUp",function(a){roomLink==a.room&&(swal("Coffees ready","Will be with you shortly","success"),drinkOrder=order.buildDrinkObj(drinkListArray),order.build())})},tabToggle:function(a){"listTab"==a?($("#drinkList").show(),$("#newOrder").hide()):($("#drinkList").hide(),$("#newOrder").show()),order.build(),$("#listTab").toggleClass("active"),$("#drinksTab").toggleClass("active")},addMessage:function(){""===message&&1===++totalNumDrinks&&$("#listToggle").fadeIn("fast"),swal({title:"",text:"Anything else to say?",type:"input",showCancelButton:!0,closeOnConfirm:!1,inputPlaceholder:message},function(a){return a!==!1&&(""===a?(swal.showInputError("You need to write something"),!1):(swal({title:a,text:"Added to order",timer:1500,showConfirmButton:!1}),message=a,order.build(),$("button.addMessage").html("EDIT MESSAGE"),categoryGA="Button",actionGA="Message",labelGA=message,void analytics.event(categoryGA,actionGA,labelGA)))}),order.closeOptions()},add:function(a,b){return $("#listToggle").fadeIn("fast"),drinkOrder[a].number++,totalNumDrinks++,console.log("options",b),categoryGA="Add",void 0===b?(actionGA=a,labelGA=""):b.hasOwnProperty("tea")?(drinkOrder[a].option.push({tea:b.tea,milk:b.milk,drinker:b.drinker}),actionGA=b.tea,labelGA=b.milk):b.hasOwnProperty("other")?(drinkOrder[a].option.push({other:b.other,drinker:b.drinker}),actionGA=b.other,labelGA=""):(drinkOrder[a].option.push({milk:b.milk,drinker:b.drinker}),actionGA=a,labelGA=b.milk),window.setTimeout(order.build,100),analytics.event(categoryGA,actionGA,labelGA),drinkOrder[a].number},delete:function(a,b){categoryGA="Delete",a?("Water"==a?(0===drinkOrder[a].number?$(".drink[data-drink='"+a+"'] p.drinkIcon span.drinkNumber").html(""):$(".drink[data-drink='"+a+"'] p.drinkIcon span.drinkNumber").html(" x "+drinkOrder[a].number),actionGA=a,labelGA=""):"Other"==a?(actionGA=a,labelGA=drinkOrder.Other.option[b]):"Tea"==a?(actionGA=drinkOrder.Tea.option[b].tea,labelGA=drinkOrder.Tea.option[b].milk):(actionGA=a,labelGA=drinkOrder[a].option[b].milk),analytics.event(categoryGA,actionGA,labelGA),$(".drink[data-drink='"+a+"'] p.drinkIcon span.drinkNumber").html(""),drinkOrder[a].number--):(analytics.event(categoryGA,"Message",message),message="",order.build(),$("button.addMessage").html("ADD MESSAGE")),totalNumDrinks--,order.build(),0===totalNumDrinks&&$("#listToggle").fadeOut("fast",order.tabToggle("drinksTab")),console.log("totalNumDrinks",totalNumDrinks)},build:function(){var a=0;drinkHtml="",drinkOrderArray=[],drinkButton="";for(var b in drinkOrder){var c=b,d=drinkOrder[b].number;if(drinkOrder[b].number>0){if("Other"==c)for(var e=0;e<drinkOrder.Other.option.length;e++)drinkHtml+='<li class="order other" data-drink="'+c+'" data-id="'+e+'"><div class="orderText"><p> <span class="drinkName">'+drinkOrder[b].option[e].other+'</span><span class="drinkPerson">'+drinkOrder[b].option[e].drinker+"</span></p></div>"+orderButtons+"</li>",drinkOrderArray.push(drinkOrder[b].option[e].other+": "+drinkOrder[b].option[e].drinker);else if("Water"==c)drinkHtml+='<li class="order water" data-drink="'+c+'"><div class="orderText"><p> <span class="drinkName">'+d+'</span> x <span class="drinkName">'+c+'</span><span class="drinkPerson"></span></p></div>'+orderButtons+"</li>",drinkOrderArray.push(d+" x "+c);else if("Tea"==c)for(var f=0;f<drinkOrder[b].option.length;f++)drinkHtml+='<li class="order tea" data-drink="'+c+'" data-id="'+f+'"><div class="orderText"><p> <span class="drinkName">'+drinkOrder[b].option[f].tea+'</span> - <span class="drinkOption">'+drinkOrder[b].option[f].milk+'</span><span class="drinkPerson">'+drinkOrder[b].option[f].drinker+"</span></p></div>"+orderButtons+"</li>",drinkOrderArray.push(drinkOrder[b].option[f].tea+" - "+drinkOrder[b].option[f].milk+": "+drinkOrder[b].option[f].drinker);else for(var g=0;g<drinkOrder[b].option.length;g++)drinkHtml+='<li class="order '+c+'" data-drink="'+c+'" data-id="'+g+'"><div class="orderText"><p> <span class="drinkName">'+c+'</span> - <span class="drinkOption">'+drinkOrder[b].option[g].milk+'</span><span class="drinkPerson">'+drinkOrder[b].option[g].drinker+"</span></p></div>"+orderButtons+"</li>",drinkOrderArray.push(c+" - "+drinkOrder[b].option[g].milk+": "+drinkOrder[b].option[g].drinker);drinkButton+='<div data-drink="'+c+'" class="drink"><p class="drinkIcon"><i class="fa fa-coffee  fa-2x"><span class="drinkNumber">x <span class="num">'+d+'</span></span></i></p><p class="drinkName">'+c+"</p>"}else drinkButton+='<div data-drink="'+c+'" class="drink"><p class="drinkIcon"><i class="fa fa-coffee  fa-2x"></i></p><p class="drinkName">'+c+"</p>";drinkButton+=a<6?'<div class="triangle-down"></div></div>':"</div>",a%2==1&&a<8&&(drinkButton+='<div class="options"></div>'),a++}""!==message&&(drinkHtml+='<li class="order message"><div class="orderText"><p> <span class="drinkName">'+message+"</span></p></div>"+orderButtons+"</li>"),$("#newOrder").html(drinkButton),$("#drinkList ul").html(drinkHtml),$(".delete-drink").on("click",function(){var a=$(this).parent().parent().parent().data("drink"),b=$(this).parent().parent().parent().data("id"),c=$(this).parent().parent().parent().hasClass("water"),d=$(this).parent().parent().parent().hasClass("message");if(order.delete(a,b),!c&&!d)for(var e=drinkOrder[a].option,f=0;f<e.length;f++)f===b&&e.splice(f,1)}),$("#newOrder .drink").each(function(){$(this).on("click",function(){var a=$(this).data("drink");if($(this).hasClass("open"))$(this).removeClass("open"),order.closeOptions();else if($(".drink").removeClass("open"),$(this).addClass("open"),"Water"==a){var b=order.add(a);$(this).find("span.drinkNumber").html(""),$(this).find("span.drinkNumber").html("x <strong>"+b+"</strong>"),categoryGA="Button",actionGA="Drink",labelGA=a,analytics.event(categoryGA,actionGA,labelGA)}else order.closeOptions(),order.openOptions($(this)),categoryGA="Button",actionGA="Drink",labelGA=a,analytics.event(categoryGA,actionGA,labelGA)})})},closeOptions:function(){$(".options").css("height","0px"),$(".triangle-down").css({"border-left":"0px solid transparent","border-right":"0px solid transparent",bottom:"0px"}),$(".copy").css("display","none")},openOptions:function(a){a.find(".triangle-down").css({"border-left":"10px solid transparent","border-right":"10px solid transparent",bottom:"-15px"});var b,c={};b="options"==a.next().attr("class")?a.next():a.next().next(),selectedDrink=a.data("drink"),"Tea"==selectedDrink?(b.css("height","160px"),order.teaDialog(b,c)):"Other"==selectedDrink?(b.css("height","110px"),order.otherDialog(b,c)):(b.css("height","110px"),order.milkDialog(b,c))},sent:function(){swal({title:"Order sent to Kitchen",text:"The barista is making your drinks",type:"success",showCancelButton:!0,confirmButtonColor:"#AEDEF4",confirmButtonText:"Send to my email",cancelButtonColor:"#AEDEF4",cancelButtonText:"OK",closeOnConfirm:!1},function(a){a&&swal({title:"",text:"Your email address",type:"input",showCancelButton:!0,closeOnConfirm:!1,inputPlaceholder:"email"},function(a){return a!==!1&&(""===a?(swal.showInputError("Please add an email"),!1):(order.sendOrder(drinkOrderArray,a),void console.log(a)))})})},sendOrder:function(a,b){categoryGA="Button",actionGA="Nav",labelGA=void 0===b?"Place Order":"Send To Another Email : "+b,analytics.event(categoryGA,actionGA,labelGA);var c,d,e,f,g,h,i,j,k=new Date,l=k.getHours(),m=k.getMinutes().toString();h=m<10?l+":0"+m:l+":"+m,g=$("header h1").html().replace(": Order",""),i=$("header").attr("class");var n=["Akl.Reception@fcb.com","Rebecca.Odom@fcb.com","holly.crawford@fcb.com","Kate.Tucker@fcb.com","tony.susi@fcb.com"];d=b?b:"http://coffee.fcb.com"==socketHost?n:["tony.susi@fcb.com"],j=["tonysusi@gmail.com"],e="New Coffee Order for "+g,c="FCB Barista <barista@fcb.com>",f=g+"\n===========\n\n",console.log("drinkOrderArray",a),console.log("to",d);for(var o=0;o<a.length;o++)f+=a[o]+"\n";f+="\n",""!==message&&(f+="-----------\nMessage: "+message),f+="\n-----------\nOrdered at "+h,socket.emit("order",{time:h,room:g,drinkOrder:drinkOrder,roomLink:i,message:message},order.sent()),$.get(socketHost+":3003/send",{to:d,bcc:j,from:c,subject:e,text:f,drinkOrder:drinkOrder,roomLink:i},function(a){"sent"==a&&(console.log("data sent"),b&&swal({title:"Order emailed to",text:inputValue,timer:1500,showConfirmButton:!1}))})},milkDialog:function(a,b){a.css("height","110px");var c,d='<div class="copy"><p>Type of Milk</p><ul class="milk"><li>';c="Latte"==selectedDrink||"Flat White"==selectedDrink||"Cappuccino"==selectedDrink||"Cappuccino"==selectedDrink?1:0;for(var e=c;e<milkListArray.length;e++)d+='<li><button data-milk="'+milkListArray[e]+'">'+milkListArray[e]+"</button></li>";d+="</ul></div>",a.html(d),window.setTimeout(function(){a.find(".copy").fadeIn("fast")},100),$("ul.milk li button").on("click",function(){b.milk=$(this).data("milk"),order.drinkerDialog(a,b),categoryGA="Button",actionGA="Milk",labelGA=$(this).data("milk"),analytics.event(categoryGA,actionGA,labelGA)})},drinkerDialog:function(a,b){a.css("height","110px");var c='<div class="copy"><p>Who is this for?</p><ul class="drinker"><li>';c+='<li><input type="text" class="drinker"><button class="drinkerButton">done</button></li>',c+="</ul></div>",a.html(c),window.setTimeout(function(){a.find(".copy").fadeIn("fast"),a.find("input").focus()},100),$("ul.drinker li button").on("click",function(){b.drinker=$(this).siblings("input")[0].value,console.log("newDrinkWithOptions",selectedDrink,b),order.closeOptions(),order.add(selectedDrink,b),categoryGA="Button",actionGA="Drinker",labelGA=$(this).siblings("input")[0].value,analytics.event(categoryGA,actionGA,labelGA)})},otherDialog:function(a,b){a.css("height","110px");var c='<div class="copy"><p>What would you like to order?</p><ul class="other"><li>';c+='<li><input type="text" class="other"><button class="otherButton">Next</button></li>',c+="</ul></div>",a.html(c),window.setTimeout(function(){a.find(".copy").fadeIn("fast"),a.find("input").focus()},100),$("ul.other li button").on("click",function(){b.other=$(this).siblings("input")[0].value,console.log("newDrinkWithOptions",selectedDrink,b),order.drinkerDialog(a,b),categoryGA="Button",actionGA="Other",labelGA=$(this).siblings("input")[0].value,analytics.event(categoryGA,actionGA,labelGA)})},teaDialog:function(a,b){for(var c='<div class="copy"><p>Type of Tea</p><ul class="tea"><li>',d=0;d<teaListArray.length;d++)c+='<li><button data-tea="'+teaListArray[d]+'">'+teaListArray[d]+"</button></li>";c+="</ul></div>",a.html(c),window.setTimeout(function(){a.find(".copy").fadeIn("fast")},100),$("ul.tea li button").on("click",function(){b.tea=$(this).data("tea"),order.milkDialog(a,b),categoryGA="Button",actionGA="Drink",labelGA=$(this).data("tea"),analytics.event(categoryGA,actionGA,labelGA)})},buildDrinkObj:function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];b[d]="Other"==d?{number:0,option:[]}:"Water"==d?{number:0}:{number:0,option:[]}}return b},sideNav:function(){var a;$("#leftMenu").hasClass("side-nav-open")?(a=":Open",$("#leftMenu").removeClass("side-nav-open"),$("body").removeClass("side-nav-push-toright")):(a=":Close",$("#leftMenu").addClass("side-nav-open"),$("body").addClass("side-nav-push-toright")),categoryGA="Button",actionGA="Nav",labelGA="Side Nav"+a,analytics.event(categoryGA,actionGA,labelGA)}},kitchen={init:function(){var a=!1;socket.on("start",function(b){if(!a){for(var c in b.rooms)kitchenOrder[b.rooms[c].link]={name:b.rooms[c].name,short:b.rooms[c].short,link:b.rooms[c].link,order:{},time:!1,message:""};a=!0}}),socket.on("order",function(a){$.each(kitchenOrder,function(b,c){c.link==a.roomLink&&(kitchenOrder[b].order=a.drinkOrder,kitchenOrder[b].time=a.time,kitchenOrder[b].message=a.message)}),kitchen.build(kitchenOrder)})},build:function(a){console.log(a);var b="";$.each(a,function(c,d){if(d.time!==!1){console.log("build",a[c].name,a[c].order,a[c].message,d);var e='<div class="orderHeader '+a[c].link+'" data-room="'+a[c].link+'"><h2>'+a[c].name+"</h2><p>"+a[c].time+'</p><a class="btn orderDone" >done</a></div>',f="<ul>";a[c].message&&(f+='<li class="message">'+a[c].message+"</li>"),$.each(a[c].order,function(a,b){if(console.log("drink",b,a),b.number>0)if("Water"==a)f+="<li>"+b.number+" x "+a+"</li>";else if("Tea"==a)for(var c=0;c<b.option.length;c++)f+="<li>"+b.option[c].tea+" - "+b.option[c].milk+"</li>";else if("Other"==a)for(var d=0;d<b.option.length;d++)f+="<li>"+b.option[d]+"</li>";else for(var e=0;e<b.option.length;e++)f+="<li>"+a+" - "+b.option[e].milk+"</li>"}),f+="</ul>",b=b+e+f}}),$("#orders").html(b),$("a.orderDone").each(function(){$(this).on("click",function(){console.log("is this a roomLink",$(this).parent().data("room")),kitchen.done($(this).parent().data("room")),$(this).parent().hide(),$(this).parent().next().hide(),a[$(this).parent().data("room")].order={},a[$(this).parent().data("room")].time=!1,console.log(a,$(this).parent().data("room"))})})},done:function(a){socket.emit("orderUp",{msg:a+" order complete",room:a})}},function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.io=a()}}(function(){var a;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=a("./lib/")},{"./lib/":2}],2:[function(a,b,c){function d(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d=e(a),f=d.source,j=d.id;return b.forceNew||b["force new connection"]||!1===b.multiplex?(h("ignoring socket cache for %s",f),c=g(f,b)):(i[j]||(h("new io instance for %s",f),i[j]=g(f,b)),c=i[j]),c.socket(d.path)}var e=a("./url"),f=a("socket.io-parser"),g=a("./manager"),h=a("debug")("socket.io-client");b.exports=c=d;var i=c.managers={};c.protocol=f.protocol,c.connect=d,c.Manager=a("./manager"),c.Socket=a("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:9,"socket.io-parser":40}],3:[function(a,b,c){function d(a,b){if(!(this instanceof d))return new d(a,b);a&&"object"==typeof a&&(b=a,a=void 0),b=b||{},b.path=b.path||"/socket.io",this.nsps={},this.subs=[],this.opts=b,this.reconnection(b.reconnection!==!1),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.timeout(null==b.timeout?2e4:b.timeout),this.readyState="closed",this.uri=a,this.connected=[],this.attempts=0,this.encoding=!1,this.packetBuffer=[],this.encoder=new h.Encoder,this.decoder=new h.Decoder,this.autoConnect=b.autoConnect!==!1,this.autoConnect&&this.open()}var e=(a("./url"),a("engine.io-client")),f=a("./socket"),g=a("component-emitter"),h=a("socket.io-parser"),i=a("./on"),j=a("component-bind"),k=(a("object-component"),a("debug")("socket.io-client:manager")),l=a("indexof");b.exports=d,d.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)this.nsps[a].emit.apply(this.nsps[a],arguments)},g(d.prototype),d.prototype.reconnection=function(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection},d.prototype.reconnectionAttempts=function(a){return arguments.length?(this._reconnectionAttempts=a,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(a){return arguments.length?(this._reconnectionDelay=a,this):this._reconnectionDelay},d.prototype.reconnectionDelayMax=function(a){return arguments.length?(this._reconnectionDelayMax=a,this):this._reconnectionDelayMax},d.prototype.timeout=function(a){return arguments.length?(this._timeout=a,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){this.openReconnect||this.reconnecting||!this._reconnection||0!==this.attempts||(this.openReconnect=!0,this.reconnect())},d.prototype.open=d.prototype.connect=function(a){if(k("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;k("opening %s",this.uri),this.engine=e(this.uri,this.opts);var b=this.engine,c=this;this.readyState="opening",this.skipReconnect=!1;var d=i(b,"open",function(){c.onopen(),a&&a()}),f=i(b,"error",function(b){if(k("connect_error"),c.cleanup(),c.readyState="closed",c.emitAll("connect_error",b),a){var d=new Error("Connection error");d.data=b,a(d)}c.maybeReconnectOnOpen()});if(!1!==this._timeout){var g=this._timeout;k("connect attempt will timeout after %d",g);var h=setTimeout(function(){k("connect attempt timed out after %d",g),d.destroy(),b.close(),b.emit("error","timeout"),c.emitAll("connect_timeout",g)},g);this.subs.push({destroy:function(){clearTimeout(h)}})}return this.subs.push(d),this.subs.push(f),this},d.prototype.onopen=function(){k("open"),this.cleanup(),this.readyState="open",this.emit("open");var a=this.engine;this.subs.push(i(a,"data",j(this,"ondata"))),this.subs.push(i(this.decoder,"decoded",j(this,"ondecoded"))),this.subs.push(i(a,"error",j(this,"onerror"))),this.subs.push(i(a,"close",j(this,"onclose")))},d.prototype.ondata=function(a){this.decoder.add(a)},d.prototype.ondecoded=function(a){this.emit("packet",a)},d.prototype.onerror=function(a){k("error",a),this.emitAll("error",a)},d.prototype.socket=function(a){var b=this.nsps[a];if(!b){b=new f(this,a),this.nsps[a]=b;var c=this;b.on("connect",function(){~l(c.connected,b)||c.connected.push(b)})}return b},d.prototype.destroy=function(a){var b=l(this.connected,a);~b&&this.connected.splice(b,1),this.connected.length||this.close()},d.prototype.packet=function(a){k("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(a){for(var c=0;c<a.length;c++)b.engine.write(a[c]);b.encoding=!1,b.processPacketQueue()}))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}},d.prototype.cleanup=function(){for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){this.skipReconnect=!0,this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(a){k("close"),this.cleanup(),this.readyState="closed",this.emit("close",a),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(++this.attempts>this._reconnectionAttempts)k("reconnect failed"),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var b=this.attempts*this.reconnectionDelay();b=Math.min(b,this.reconnectionDelayMax()),k("will wait %dms before reconnect attempt",b),this.reconnecting=!0;var c=setTimeout(function(){a.skipReconnect||(k("attempting reconnect"),a.emitAll("reconnect_attempt",a.attempts),a.emitAll("reconnecting",a.attempts),a.skipReconnect||a.open(function(b){b?(k("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(k("reconnect success"),a.onreconnect())}))},b);this.subs.push({destroy:function(){clearTimeout(c)}})}},d.prototype.onreconnect=function(){var a=this.attempts;this.attempts=0,this.reconnecting=!1,this.emitAll("reconnect",a)}},{"./on":4,"./socket":5,"./url":6,"component-bind":7,"component-emitter":8,debug:9,"engine.io-client":10,indexof:36,"object-component":37,"socket.io-parser":40}],4:[function(a,b,c){function d(a,b,c){return a.on(b,c),{destroy:function(){a.removeListener(b,c)}}}b.exports=d},{}],5:[function(a,b,c){function d(a,b){this.io=a,this.nsp=b,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var e=a("socket.io-parser"),f=a("component-emitter"),g=a("to-array"),h=a("./on"),i=a("component-bind"),j=a("debug")("socket.io-client:socket"),k=a("has-binary");b.exports=d;var l={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},m=f.prototype.emit;f(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[h(a,"open",i(this,"onopen")),h(a,"packet",i(this,"onpacket")),h(a,"close",i(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},d.prototype.send=function(){var a=g(arguments);return a.unshift("message"),this.emit.apply(this,a),this},d.prototype.emit=function(a){if(l.hasOwnProperty(a))return m.apply(this,arguments),this;var b=g(arguments),c=e.EVENT;k(b)&&(c=e.BINARY_EVENT);var d={type:c,data:b};return"function"==typeof b[b.length-1]&&(j("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),this},d.prototype.packet=function(a){a.nsp=this.nsp,this.io.packet(a)},d.prototype.onopen=function(){j("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:e.CONNECT})},d.prototype.onclose=function(a){j("close (%s)",a),this.connected=!1,this.disconnected=!0,this.emit("disconnect",a)},d.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case e.CONNECT:this.onconnect();break;case e.EVENT:this.onevent(a);break;case e.BINARY_EVENT:this.onevent(a);break;case e.ACK:this.onack(a);break;case e.BINARY_ACK:this.onack(a);break;case e.DISCONNECT:this.ondisconnect();break;case e.ERROR:this.emit("error",a.data)}},d.prototype.onevent=function(a){var b=a.data||[];j("emitting event %j",b),null!=a.id&&(j("attaching ack callback to event"),b.push(this.ack(a.id))),this.connected?m.apply(this,b):this.receiveBuffer.push(b)},d.prototype.ack=function(a){var b=this,c=!1;return function(){if(!c){c=!0;var d=g(arguments);j("sending ack %j",d);var f=k(d)?e.BINARY_ACK:e.ACK;b.packet({type:f,id:a,data:d})}}},d.prototype.onack=function(a){j("calling ack %s with %j",a.id,a.data),this.acks[a.id].apply(this,a.data),delete this.acks[a.id]},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)m.apply(this,this.receiveBuffer[a]);for(this.receiveBuffer=[],a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){j("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(j("performing disconnect (%s)",this.nsp),this.packet({type:e.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":7,"component-emitter":8,debug:9,"has-binary":32,"socket.io-parser":40,"to-array":44}],6:[function(a,b,c){(function(c){function d(a,b){var d=a,b=b||c.location;return null==a&&(a=b.protocol+"//"+b.hostname),"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?b.protocol+a:b.hostname+a),/^(https?|wss?):\/\//.test(a)||(f("protocol-less url %s",a),a=void 0!==b?b.protocol+"//"+a:"https://"+a),f("parse %s",a),d=e(a)),d.port||(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/",d.id=d.protocol+"://"+d.host+":"+d.port,d.href=d.protocol+"://"+d.host+(b&&b.port==d.port?"":":"+d.port),d}var e=a("parseuri"),f=a("debug")("socket.io-client:url");b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:9,parseuri:38}],7:[function(a,b,c){var d=[].slice;b.exports=function(a,b){if("string"==typeof b&&(b=a[b]),"function"!=typeof b)throw new Error("bind() requires a function");var c=d.call(arguments,2);return function(){return b.apply(a,c.concat(d.call(arguments)))}}},{}],8:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}b.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<c.length;e++)if((d=c[e])===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],9:[function(a,b,c){function d(a){return d.enabled(a)?function(b){b=e(b);var c=new Date,f=c-(d[a]||c);d[a]=c,b=a+" "+b+" +"+d.humanize(f),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function e(a){return a instanceof Error?a.stack||a.message:a}b.exports=d,d.names=[],d.skips=[],d.enable=function(a){try{localStorage.debug=a}catch(f){}for(var b=(a||"").split(/[\s,]+/),c=b.length,e=0;e<c;e++)a=b[e].replace("*",".*?"),"-"===a[0]?d.skips.push(new RegExp("^"+a.substr(1)+"$")):d.names.push(new RegExp("^"+a+"$"))},d.disable=function(){d.enable("")},d.humanize=function(a){var b=1e3,c=6e4,d=60*c;return a>=d?(a/d).toFixed(1)+"h":a>=c?(a/c).toFixed(1)+"m":a>=b?(a/b|0)+"s":a+"ms"},d.enabled=function(a){for(var b=0,c=d.skips.length;b<c;b++)if(d.skips[b].test(a))return!1;for(var b=0,c=d.names.length;b<c;b++)if(d.names[b].test(a))return!0;return!1};try{window.localStorage&&d.enable(localStorage.debug)}catch(f){}},{}],10:[function(a,b,c){b.exports=a("./lib/")},{"./lib/":11}],11:[function(a,b,c){b.exports=a("./socket"),b.exports.parser=a("engine.io-parser")},{"./socket":12,"engine.io-parser":21}],12:[function(a,b,c){(function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);if(b=b||{},a&&"object"==typeof a&&(b=a,a=null),a&&(a=k(a),b.host=a.host,b.secure="https"==a.protocol||"wss"==a.protocol,b.port=a.port,a.query&&(b.query=a.query)),this.secure=null!=b.secure?b.secure:c.location&&"https:"==location.protocol,b.host){var e=b.host.split(":");b.hostname=e.shift(),e.length&&(b.port=e.pop())}this.agent=b.agent||!1,this.hostname=b.hostname||(c.location?location.hostname:"localhost"),this.port=b.port||(c.location&&location.port?location.port:this.secure?443:80),this.query=b.query||{},"string"==typeof this.query&&(this.query=m.decode(this.query)),this.upgrade=!1!==b.upgrade,this.path=(b.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!b.forceJSONP,this.jsonp=!1!==b.jsonp,this.forceBase64=!!b.forceBase64,this.enablesXDR=!!b.enablesXDR,this.timestampParam=b.timestampParam||"t",this.timestampRequests=b.timestampRequests,this.transports=b.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=b.policyPort||843,this.rememberUpgrade=b.rememberUpgrade||!1,this.open(),this.binaryType=null,this.onlyBinaryUpgrades=b.onlyBinaryUpgrades}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var f=a("./transports"),g=a("component-emitter"),h=a("debug")("engine.io-client:socket"),i=a("indexof"),j=a("engine.io-parser"),k=a("parseuri"),l=a("parsejson"),m=a("parseqs");b.exports=d,d.priorWebsocketSuccess=!1,g(d.prototype),d.protocol=j.protocol,d.Socket=d,d.Transport=a("./transport"),d.transports=a("./transports"),d.parser=a("engine.io-parser"),d.prototype.createTransport=function(a){h('creating transport "%s"',a);var b=e(this.query);return b.EIO=j.protocol,b.transport=a,this.id&&(b.sid=this.id),new f[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:b,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this})},d.prototype.open=function(){var a;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1)a="websocket";else{if(0==this.transports.length){var b=this;return void setTimeout(function(){b.emit("error","No transports available")},0)}a=this.transports[0]}this.readyState="opening";var a;try{a=this.createTransport(a)}catch(c){return this.transports.shift(),void this.open()}a.open(),this.setTransport(a)},d.prototype.setTransport=function(a){h("setting transport %s",a.name);var b=this;this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=a,a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})},d.prototype.probe=function(a){function b(){if(m.onlyBinaryUpgrades){var b=!this.supportsBinary&&m.transport.supportsBinary;l=l||b}l||(h('probe transport "%s" opened',a),k.send([{type:"ping",data:"probe"}]),k.once("packet",function(b){if(!l)if("pong"==b.type&&"probe"==b.data){if(h('probe transport "%s" pong',a),
m.upgrading=!0,m.emit("upgrading",k),!k)return;d.priorWebsocketSuccess="websocket"==k.name,h('pausing current transport "%s"',m.transport.name),m.transport.pause(function(){l||"closed"!=m.readyState&&(h("changing transport and sending upgrade packet"),j(),m.setTransport(k),k.send([{type:"upgrade"}]),m.emit("upgrade",k),k=null,m.upgrading=!1,m.flush())})}else{h('probe transport "%s" failed',a);var c=new Error("probe error");c.transport=k.name,m.emit("upgradeError",c)}}))}function c(){l||(l=!0,j(),k.close(),k=null)}function e(b){var d=new Error("probe error: "+b);d.transport=k.name,c(),h('probe transport "%s" failed because of error: %s',a,b),m.emit("upgradeError",d)}function f(){e("transport closed")}function g(){e("socket closed")}function i(a){k&&a.name!=k.name&&(h('"%s" works - aborting "%s"',a.name,k.name),c())}function j(){k.removeListener("open",b),k.removeListener("error",e),k.removeListener("close",f),m.removeListener("close",g),m.removeListener("upgrading",i)}h('probing transport "%s"',a);var k=this.createTransport(a,{probe:1}),l=!1,m=this;d.priorWebsocketSuccess=!1,k.once("open",b),k.once("error",e),k.once("close",f),this.once("close",g),this.once("upgrading",i),k.open()},d.prototype.onOpen=function(){if(h("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){h("starting upgrade probes");for(var a=0,b=this.upgrades.length;a<b;a++)this.probe(this.upgrades[a])}},d.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(h('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case"open":this.onHandshake(l(a.data));break;case"pong":this.setPing();break;case"error":var b=new Error("server error");b.code=a.data,this.emit("error",b);break;case"message":this.emit("data",a.data),this.emit("message",a.data)}else h('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(a){this.emit("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){"closed"!=b.readyState&&b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)},d.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer),a.pingIntervalTimer=setTimeout(function(){h("writing ping packet - expecting pong within %sms",a.pingTimeout),a.ping(),a.onHeartbeat(a.pingTimeout)},a.pingInterval)},d.prototype.ping=function(){this.sendPacket("ping")},d.prototype.onDrain=function(){for(var a=0;a<this.prevBufferLen;a++)this.callbackBuffer[a]&&this.callbackBuffer[a]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(h("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(a,b){return this.sendPacket("message",a,b),this},d.prototype.sendPacket=function(a,b,c){if("closing"!=this.readyState&&"closed"!=this.readyState){var d={type:a,data:b};this.emit("packetCreate",d),this.writeBuffer.push(d),this.callbackBuffer.push(c),this.flush()}},d.prototype.close=function(){function a(){d.onClose("forced close"),h("socket closing - telling transport to close"),d.transport.close()}function b(){d.removeListener("upgrade",b),d.removeListener("upgradeError",b),a()}function c(){d.once("upgrade",b),d.once("upgradeError",b)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var d=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?c():a()}):this.upgrading?c():a()}return this},d.prototype.onError=function(a){h("socket error %j",a),d.priorWebsocketSuccess=!1,this.emit("error",a),this.onClose("transport error",a)},d.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){h('socket close with reason: "%s"',a);var c=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){c.writeBuffer=[],c.callbackBuffer=[],c.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",a,b)}},d.prototype.filterUpgrades=function(a){for(var b=[],c=0,d=a.length;c<d;c++)~i(this.transports,a[c])&&b.push(a[c]);return b}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":13,"./transports":14,"component-emitter":8,debug:9,"engine.io-parser":21,indexof:36,parsejson:28,parseqs:29,parseuri:30}],13:[function(a,b,c){function d(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR}var e=a("engine.io-parser"),f=a("component-emitter");b.exports=d,f(d.prototype),d.timestamps=0,d.prototype.onError=function(a,b){var c=new Error(a);return c.type="TransportError",c.description=b,this.emit("error",c),this},d.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},d.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},d.prototype.send=function(a){if("open"!=this.readyState)throw new Error("Transport not open");this.write(a)},d.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},d.prototype.onData=function(a){var b=e.decodePacket(a,this.socket.binaryType);this.onPacket(b)},d.prototype.onPacket=function(a){this.emit("packet",a)},d.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":8,"engine.io-parser":21}],14:[function(a,b,c){(function(b){function d(a){var c=!1,d=!1,h=!1!==a.jsonp;if(b.location){var i="https:"==location.protocol,j=location.port;j||(j=i?443:80),c=a.hostname!=location.hostname||j!=a.port,d=a.secure!=i}if(a.xdomain=c,a.xscheme=d,"open"in new e(a)&&!a.forceJSONP)return new f(a);if(!h)throw new Error("JSONP disabled");return new g(a)}var e=a("xmlhttprequest"),f=a("./polling-xhr"),g=a("./polling-jsonp"),h=a("./websocket");c.polling=d,c.websocket=h}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":15,"./polling-xhr":16,"./websocket":18,xmlhttprequest:19}],15:[function(a,b,c){(function(c){function d(){}function e(a){f.call(this,a),this.query=this.query||{},h||(c.___eio||(c.___eio=[]),h=c.___eio),this.index=h.length;var b=this;h.push(function(a){b.onData(a)}),this.query.j=this.index,c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){b.script&&(b.script.onerror=d)})}var f=a("./polling"),g=a("component-inherit");b.exports=e;var h,i=/\n/g,j=/\\n/g;g(e,f),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),f.prototype.doClose.call(this)},e.prototype.doPoll=function(){var a=this,b=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),b.async=!0,b.src=this.uri(),b.onerror=function(b){a.onError("jsonp poll error",b)};var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c),this.script=b,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},e.prototype.doWrite=function(a,b){function c(){d(),b()}function d(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(b){e.onError("jsonp polling iframe removal error",e)}try{var a='<iframe src="javascript:0" name="'+e.iframeId+'">';f=document.createElement(a)}catch(b){f=document.createElement("iframe"),f.name=e.iframeId,f.src="javascript:0"}f.id=e.iframeId,e.form.appendChild(f),e.iframe=f}var e=this;if(!this.form){var f,g=document.createElement("form"),h=document.createElement("textarea"),k=this.iframeId="eio_iframe_"+this.index;g.className="socketio",g.style.position="absolute",g.style.top="-1000px",g.style.left="-1000px",g.target=k,g.method="POST",g.setAttribute("accept-charset","utf-8"),h.name="d",g.appendChild(h),document.body.appendChild(g),this.form=g,this.area=h}this.form.action=this.uri(),d(),a=a.replace(j,"\\\n"),this.area.value=a.replace(i,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-inherit":20}],16:[function(a,b,c){(function(c){function d(){}function e(a){if(i.call(this,a),c.location){var b="https:"==location.protocol,d=location.port;d||(d=b?443:80),this.xd=a.hostname!=c.location.hostname||d!=a.port,this.xs=a.secure!=b}}function f(a){this.method=a.method||"GET",this.uri=a.uri,this.xd=!!a.xd,this.xs=!!a.xs,this.async=!1!==a.async,this.data=void 0!=a.data?a.data:null,this.agent=a.agent,this.isBinary=a.isBinary,this.supportsBinary=a.supportsBinary,this.enablesXDR=a.enablesXDR,this.create()}function g(){for(var a in f.requests)f.requests.hasOwnProperty(a)&&f.requests[a].abort()}var h=a("xmlhttprequest"),i=a("./polling"),j=a("component-emitter"),k=a("component-inherit"),l=a("debug")("engine.io-client:polling-xhr");b.exports=e,b.exports.Request=f,k(e,i),e.prototype.supportsBinary=!0,e.prototype.request=function(a){return a=a||{},a.uri=this.uri(),a.xd=this.xd,a.xs=this.xs,a.agent=this.agent||!1,a.supportsBinary=this.supportsBinary,a.enablesXDR=this.enablesXDR,new f(a)},e.prototype.doWrite=function(a,b){var c="string"!=typeof a&&void 0!==a,d=this.request({method:"POST",data:a,isBinary:c}),e=this;d.on("success",b),d.on("error",function(a){e.onError("xhr post error",a)}),this.sendXhr=d},e.prototype.doPoll=function(){l("xhr poll");var a=this.request(),b=this;a.on("data",function(a){b.onData(a)}),a.on("error",function(a){b.onError("xhr poll error",a)}),this.pollXhr=a},j(f.prototype),f.prototype.create=function(){var a=this.xhr=new h({agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR}),b=this;try{if(l("xhr open %s: %s",this.method,this.uri),a.open(this.method,this.uri,this.async),this.supportsBinary&&(a.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?a.setRequestHeader("Content-type","application/octet-stream"):a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(d){}"withCredentials"in a&&(a.withCredentials=!0),this.hasXDR()?(a.onload=function(){b.onLoad()},a.onerror=function(){b.onError(a.responseText)}):a.onreadystatechange=function(){4==a.readyState&&(200==a.status||1223==a.status?b.onLoad():setTimeout(function(){b.onError(a.status)},0))},l("xhr data %s",this.data),a.send(this.data)}catch(d){return void setTimeout(function(){b.onError(d)},0)}c.document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(a){this.emit("data",a),this.onSuccess()},f.prototype.onError=function(a){this.emit("error",a),this.cleanup()},f.prototype.cleanup=function(){if(void 0!==this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=d:this.xhr.onreadystatechange=d;try{this.xhr.abort()}catch(a){}c.document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var a;try{var b;try{b=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(c){}a="application/octet-stream"===b?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(c){this.onError(c)}null!=a&&this.onData(a)},f.prototype.hasXDR=function(){return void 0!==c.XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},c.document&&(f.requestsCount=0,f.requests={},c.attachEvent?c.attachEvent("onunload",g):c.addEventListener&&c.addEventListener("beforeunload",g))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-emitter":8,"component-inherit":20,debug:9,xmlhttprequest:19}],17:[function(a,b,c){function d(a){var b=a&&a.forceBase64;j&&!b||(this.supportsBinary=!1),e.call(this,a)}var e=a("../transport"),f=a("parseqs"),g=a("engine.io-parser"),h=a("component-inherit"),i=a("debug")("engine.io-client:polling");b.exports=d;var j=function(){return null!=new(a("xmlhttprequest"))({xdomain:!1}).responseType}();h(d,e),d.prototype.name="polling",d.prototype.doOpen=function(){this.poll()},d.prototype.pause=function(a){function b(){i("paused"),c.readyState="paused",a()}var c=this;if(this.readyState="pausing",this.polling||!this.writable){var d=0;this.polling&&(i("we are currently polling - waiting to pause"),d++,this.once("pollComplete",function(){i("pre-pause polling complete"),--d||b()})),this.writable||(i("we are currently writing - waiting to pause"),d++,this.once("drain",function(){i("pre-pause writing complete"),--d||b()}))}else b()},d.prototype.poll=function(){i("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},d.prototype.onData=function(a){var b=this;i("polling got data %s",a);var c=function(a,c,d){if("opening"==b.readyState&&b.onOpen(),"close"==a.type)return b.onClose(),!1;b.onPacket(a)};g.decodePayload(a,this.socket.binaryType,c),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():i('ignoring poll - transport state "%s"',this.readyState))},d.prototype.doClose=function(){function a(){i("writing close packet"),b.write([{type:"close"}])}var b=this;"open"==this.readyState?(i("transport open - closing"),a()):(i("transport not open - deferring close"),this.once("open",a))},d.prototype.write=function(a){var b=this;this.writable=!1;var c=function(){b.writable=!0,b.emit("drain")},b=this;g.encodePayload(a,this.supportsBinary,function(a){b.doWrite(a,c)})},d.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",c="";return!1!==this.timestampRequests&&(a[this.timestampParam]=+new Date+"-"+e.timestamps++),this.supportsBinary||a.sid||(a.b64=1),a=f.encode(a),this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(c=":"+this.port),a.length&&(a="?"+a),b+"://"+this.hostname+c+this.path+a}},{"../transport":13,"component-inherit":20,debug:9,"engine.io-parser":21,parseqs:29,xmlhttprequest:19}],18:[function(a,b,c){function d(a){a&&a.forceBase64&&(this.supportsBinary=!1),e.call(this,a)}var e=a("../transport"),f=a("engine.io-parser"),g=a("parseqs"),h=a("component-inherit"),i=a("debug")("engine.io-client:websocket"),j=a("ws");b.exports=d,h(d,e),d.prototype.name="websocket",d.prototype.supportsBinary=!0,d.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b={agent:this.agent};this.ws=new j(a,void 0,b),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},d.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(b){a.onData(b.data)},this.ws.onerror=function(b){a.onError("websocket error",b)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(d.prototype.onData=function(a){var b=this;setTimeout(function(){e.prototype.onData.call(b,a)},0)}),d.prototype.write=function(a){function b(){c.writable=!0,c.emit("drain")}var c=this;this.writable=!1;for(var d=0,e=a.length;d<e;d++)f.encodePacket(a[d],this.supportsBinary,function(a){try{c.ws.send(a)}catch(b){i("websocket closed before onclose event")}});setTimeout(b,0)},d.prototype.onClose=function(){e.prototype.onClose.call(this)},d.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},d.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";return this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(c=":"+this.port),this.timestampRequests&&(a[this.timestampParam]=+new Date),this.supportsBinary||(a.b64=1),a=g.encode(a),a.length&&(a="?"+a),b+"://"+this.hostname+c+this.path+a},d.prototype.check=function(){return!(!j||"__initialize"in j&&this.name===d.prototype.name)}},{"../transport":13,"component-inherit":20,debug:9,"engine.io-parser":21,parseqs:29,ws:31}],19:[function(a,b,c){var d=a("has-cors");b.exports=function(a){var b=a.xdomain,c=a.xscheme,e=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!b||d))return new XMLHttpRequest}catch(f){}try{if("undefined"!=typeof XDomainRequest&&!c&&e)return new XDomainRequest}catch(f){}if(!b)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(f){}}},{"has-cors":34}],20:[function(a,b,c){b.exports=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],21:[function(a,b,c){(function(b){function d(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=a.data,f=new Uint8Array(e),g=new Uint8Array(1+e.byteLength);g[0]=n[a.type];for(var h=0;h<f.length;h++)g[h+1]=f[h];return d(g.buffer)}function e(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=new FileReader;return e.onload=function(){a.data=e.result,c.encodePacket(a,b,!0,d)},e.readAsArrayBuffer(a.data)}function f(a,b,d){if(!b)return c.encodeBase64Packet(a,d);if(m)return e(a,b,d);var f=new Uint8Array(1);return f[0]=n[a.type],d(new q([f.buffer,a.data]))}function g(a,b,c){for(var d=new Array(a.length),e=k(a.length,c),f=function(a,c,e){b(c,function(b,c){d[a]=c,e(b,d)})},g=0;g<a.length;g++)f(g,a[g],e)}var h=a("./keys"),i=a("arraybuffer.slice"),j=a("base64-arraybuffer"),k=a("after"),l=a("utf8"),m=navigator.userAgent.match(/Android/i);c.protocol=3;var n=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},o=h(n),p={type:"error",data:"parser error"},q=a("blob");c.encodePacket=function(a,c,e,g){"function"==typeof c&&(g=c,c=!1),"function"==typeof e&&(g=e,e=null);var h=void 0===a.data?void 0:a.data.buffer||a.data;if(b.ArrayBuffer&&h instanceof ArrayBuffer)return d(a,c,g);if(q&&h instanceof b.Blob)return f(a,c,g);var i=n[a.type];return void 0!==a.data&&(i+=e?l.encode(String(a.data)):String(a.data)),g(""+i)},c.encodeBase64Packet=function(a,d){var e="b"+c.packets[a.type];if(q&&a.data instanceof q){var f=new FileReader;return f.onload=function(){d(e+f.result.split(",")[1])},f.readAsDataURL(a.data)}var g;try{g=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(k){for(var h=new Uint8Array(a.data),i=new Array(h.length),j=0;j<h.length;j++)i[j]=h[j];g=String.fromCharCode.apply(null,i)}return e+=b.btoa(g),d(e)},c.decodePacket=function(a,b,d){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),b);if(d)try{a=l.decode(a)}catch(h){return p}var e=a.charAt(0);return Number(e)==e&&o[e]?a.length>1?{type:o[e],data:a.substring(1)}:{type:o[e]}:p}var f=new Uint8Array(a),e=f[0],g=i(a,1);return q&&"blob"===b&&(g=new q([g])),{type:o[e],data:g}},c.decodeBase64Packet=function(a,c){var d=o[a.charAt(0)];if(!b.ArrayBuffer)return{type:d,data:{base64:!0,data:a.substr(1)}};var e=j.decode(a.substr(1));return"blob"===c&&q&&(e=new q([e])),{type:d,data:e}},c.encodePayload=function(a,b,d){function e(a){return a.length+":"+a}function f(a,d){c.encodePacket(a,b,!0,function(a){d(null,e(a))})}return"function"==typeof b&&(d=b,b=null),b?q&&!m?c.encodePayloadAsBlob(a,d):c.encodePayloadAsArrayBuffer(a,d):a.length?void g(a,f,function(a,b){return d(b.join(""))}):d("0:")},c.decodePayload=function(a,b,d){if("string"!=typeof a)return c.decodePayloadAsBinary(a,b,d);"function"==typeof b&&(d=b,b=null);var e;if(""==a)return d(p,0,1);for(var f,g,h="",i=0,j=a.length;i<j;i++){var k=a.charAt(i);if(":"!=k)h+=k;else{if(""==h||h!=(f=Number(h)))return d(p,0,1);if(g=a.substr(i+1,f),h!=g.length)return d(p,0,1);if(g.length){if(e=c.decodePacket(g,b,!0),p.type==e.type&&p.data==e.data)return d(p,0,1);if(!1===d(e,i+f,j))return}i+=f,h=""}}return""!=h?d(p,0,1):void 0},c.encodePayloadAsArrayBuffer=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){return b(null,a)})}if(!a.length)return b(new ArrayBuffer(0));g(a,d,function(a,c){var d=c.reduce(function(a,b){var c;return c="string"==typeof b?b.length:b.byteLength,a+c.toString().length+c+2},0),e=new Uint8Array(d),f=0;return c.forEach(function(a){var b="string"==typeof a,c=a;if(b){for(var d=new Uint8Array(a.length),g=0;g<a.length;g++)d[g]=a.charCodeAt(g);c=d.buffer}e[f++]=b?0:1;for(var h=c.byteLength.toString(),g=0;g<h.length;g++)e[f++]=parseInt(h[g]);e[f++]=255;for(var d=new Uint8Array(c),g=0;g<d.length;g++)e[f++]=d[g]}),b(e.buffer)})},c.encodePayloadAsBlob=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){var c=new Uint8Array(1);if(c[0]=1,"string"==typeof a){for(var d=new Uint8Array(a.length),e=0;e<a.length;e++)d[e]=a.charCodeAt(e);a=d.buffer,c[0]=0}for(var f=a instanceof ArrayBuffer?a.byteLength:a.size,g=f.toString(),h=new Uint8Array(g.length+1),e=0;e<g.length;e++)h[e]=parseInt(g[e]);if(h[g.length]=255,q){b(null,new q([c.buffer,h.buffer,a]))}})}g(a,d,function(a,c){return b(new q(c))})},c.decodePayloadAsBinary=function(a,b,d){"function"==typeof b&&(d=b,b=null);for(var e=a,f=[],g=!1;e.byteLength>0;){for(var h=new Uint8Array(e),j=0===h[0],k="",l=1;255!=h[l];l++){if(k.length>310){g=!0;break}k+=h[l]}if(g)return d(p,0,1);e=i(e,2+k.length),k=parseInt(k);var m=i(e,0,k);if(j)try{m=String.fromCharCode.apply(null,new Uint8Array(m))}catch(q){var n=new Uint8Array(m);m="";for(var l=0;l<n.length;l++)m+=String.fromCharCode(n[l])}f.push(m),e=i(e,k)}var o=f.length;f.forEach(function(a,e){d(c.decodePacket(a,b,!0),e,o)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":22,after:23,"arraybuffer.slice":24,"base64-arraybuffer":25,blob:26,utf8:27}],22:[function(a,b,c){b.exports=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty;for(var d in a)c.call(a,d)&&b.push(d);return b}},{}],23:[function(a,b,c){function d(a,b,c){function d(a,e){if(d.count<=0)throw new Error("after called too many times");--d.count,a?(f=!0,b(a),b=c):0!==d.count||f||b(null,e)}var f=!1;return c=c||e,d.count=a,0===a?b():d}function e(){}b.exports=d},{}],24:[function(a,b,c){b.exports=function(a,b,c){var d=a.byteLength;if(b=b||0,c=c||d,a.slice)return a.slice(b,c);if(b<0&&(b+=d),c<0&&(c+=d),c>d&&(c=d),b>=d||b>=c||0===d)return new ArrayBuffer(0);for(var e=new Uint8Array(a),f=new Uint8Array(c-b),g=b,h=0;g<c;g++,h++)f[h]=e[g];return f.buffer}},{}],25:[function(a,b,c){!function(a){"use strict";c.encode=function(b){var c,d=new Uint8Array(b),e=d.length,f="";for(c=0;c<e;c+=3)f+=a[d[c]>>2],f+=a[(3&d[c])<<4|d[c+1]>>4],f+=a[(15&d[c+1])<<2|d[c+2]>>6],f+=a[63&d[c+2]];return e%3==2?f=f.substring(0,f.length-1)+"=":e%3==1&&(f=f.substring(0,f.length-2)+"=="),f},c.decode=function(b){var c,d,e,f,g,h=.75*b.length,i=b.length,j=0;"="===b[b.length-1]&&(h--,"="===b[b.length-2]&&h--);var k=new ArrayBuffer(h),l=new Uint8Array(k);for(c=0;c<i;c+=4)d=a.indexOf(b[c]),e=a.indexOf(b[c+1]),f=a.indexOf(b[c+2]),g=a.indexOf(b[c+3]),l[j++]=d<<2|e>>4,l[j++]=(15&e)<<4|f>>2,l[j++]=(3&f)<<6|63&g;return k}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],26:[function(a,b,c){(function(a){function c(a,b){b=b||{};for(var c=new d,e=0;e<a.length;e++)c.append(a[e]);return b.type?c.getBlob(b.type):c.getBlob()}var d=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,e=function(){try{return 2==new Blob(["hi"]).size}catch(a){return!1}}(),f=d&&d.prototype.append&&d.prototype.getBlob;b.exports=function(){return e?a.Blob:f?c:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(b,c,d){(function(b){!function(e){function f(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),b>=55296&&b<=56319&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function g(a){for(var b,c=a.length,d=-1,e="";++d<c;)b=a[d],b>65535&&(b-=65536,e+=t(b>>>10&1023|55296),b=56320|1023&b),e+=t(b);return e}function h(a,b){return t(a>>b&63|128)}function i(a){if(0==(4294967168&a))return t(a);var b="";return 0==(4294965248&a)?b=t(a>>6&31|192):0==(4294901760&a)?(b=t(a>>12&15|224),b+=h(a,6)):0==(4292870144&a)&&(b=t(a>>18&7|240),b+=h(a,12),b+=h(a,6)),b+=t(63&a|128)}function j(a){for(var b,c=f(a),d=c.length,e=-1,g="";++e<d;)b=c[e],g+=i(b);return g}function k(){if(s>=r)throw Error("Invalid byte index");var a=255&q[s];if(s++,128==(192&a))return 63&a;throw Error("Invalid continuation byte")}function l(){var a,b,c,d,e;if(s>r)throw Error("Invalid byte index");if(s==r)return!1;if(a=255&q[s],s++,0==(128&a))return a;if(192==(224&a)){var b=k();if((e=(31&a)<<6|b)>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&a)){if(b=k(),c=k(),(e=(15&a)<<12|b<<6|c)>=2048)return e;throw Error("Invalid continuation byte")}if(240==(248&a)&&(b=k(),c=k(),d=k(),(e=(15&a)<<18|b<<12|c<<6|d)>=65536&&e<=1114111))return e;throw Error("Invalid UTF-8 detected")}function m(a){q=f(a),r=q.length,s=0;for(var b,c=[];(b=l())!==!1;)c.push(b);return g(c)}var n="object"==typeof d&&d,o="object"==typeof c&&c&&c.exports==n&&c,p="object"==typeof b&&b;p.global!==p&&p.window!==p||(e=p);var q,r,s,t=String.fromCharCode,u={version:"2.0.0",encode:j,decode:m};if("function"==typeof a&&"object"==typeof a.amd&&a.amd)a(function(){return u});else if(n&&!n.nodeType)if(o)o.exports=u;else{var v={},w=v.hasOwnProperty;for(var x in u)w.call(u,x)&&(n[x]=u[x])}else e.utf8=u}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(a,b,c){(function(a){var c=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,e=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,g=/^\s+/,h=/\s+$/;b.exports=function(b){return"string"==typeof b&&b?(b=b.replace(g,"").replace(h,""),a.JSON&&JSON.parse?JSON.parse(b):c.test(b.replace(d,"@").replace(e,"]").replace(f,""))?new Function("return "+b)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(a,b,c){c.encode=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b},c.decode=function(a){for(var b={},c=a.split("&"),d=0,e=c.length;d<e;d++){var f=c[d].split("=");b[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return b}},{}],30:[function(a,b,c){var d=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){var b=a,c=a.indexOf("["),f=a.indexOf("]");c!=-1&&f!=-1&&(a=a.substring(0,c)+a.substring(c,f).replace(/:/g,";")+a.substring(f,a.length));for(var g=d.exec(a||""),h={},i=14;i--;)h[e[i]]=g[i]||"";return c!=-1&&f!=-1&&(h.source=b,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h}},{}],31:[function(a,b,c){function d(a,b,c){return b?new f(a,b):new f(a)}var e=function(){return this}(),f=e.WebSocket||e.MozWebSocket;b.exports=f?d:null,f&&(d.prototype=f.prototype)},{}],32:[function(a,b,c){(function(c){function d(a){function b(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(var d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&(a=a.toJSON());for(var f in a)if(a.hasOwnProperty(f)&&b(a[f]))return!0}return!1}return b(a)}var e=a("isarray");b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:33}],33:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],34:[function(a,b,c){var d=a("global");try{b.exports="XMLHttpRequest"in d&&"withCredentials"in new d.XMLHttpRequest}catch(e){b.exports=!1}},{global:35}],35:[function(a,b,c){b.exports=function(){return this}()},{}],36:[function(a,b,c){var d=[].indexOf;b.exports=function(a,b){if(d)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}},{}],37:[function(a,b,c){var d=Object.prototype.hasOwnProperty;c.keys=Object.keys||function(a){var b=[];for(var c in a)d.call(a,c)&&b.push(c);return b},c.values=function(a){var b=[];for(var c in a)d.call(a,c)&&b.push(a[c]);return b},c.merge=function(a,b){for(var c in b)d.call(b,c)&&(a[c]=b[c]);return a},c.length=function(a){return c.keys(a).length},c.isEmpty=function(a){return 0==c.length(a)}},{}],38:[function(a,b,c){var d=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){for(var b=d.exec(a||""),c={},f=14;f--;)c[e[f]]=b[f]||"";return c}},{}],39:[function(a,b,c){(function(b){var d=a("isarray"),e=a("./is-buffer");c.deconstructPacket=function(a){function b(a){if(!a)return a;if(e(a)){var f={_placeholder:!0,num:c.length};return c.push(a),f}if(d(a)){for(var g=new Array(a.length),h=0;h<a.length;h++)g[h]=b(a[h]);return g}if("object"==typeof a&&!(a instanceof Date)){var g={};for(var i in a)g[i]=b(a[i]);return g}return a}var c=[],f=a.data,g=a;return g.data=b(f),g.attachments=c.length,{packet:g,buffers:c}},c.reconstructPacket=function(a,b){function c(a){if(a&&a._placeholder){return b[a.num]}if(d(a)){for(var e=0;e<a.length;e++)a[e]=c(a[e]);return a}if(a&&"object"==typeof a){for(var f in a)a[f]=c(a[f]);return a}return a}return a.data=c(a.data),a.attachments=void 0,a},c.removeBlobs=function(a,c){function f(a,i,j){if(!a)return a;if(b.Blob&&a instanceof Blob||b.File&&a instanceof File){g++;var k=new FileReader;k.onload=function(){j?j[i]=this.result:h=this.result,--g||c(h)},k.readAsArrayBuffer(a)}else if(d(a))for(var l=0;l<a.length;l++)f(a[l],l,a);else if(a&&"object"==typeof a&&!e(a))for(var m in a)f(a[m],m,a)}var g=0,h=a;f(h),g||c(h)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":41,isarray:42}],40:[function(a,b,c){function d(){}function e(a){var b="",d=!1;return b+=a.type,c.BINARY_EVENT!=a.type&&c.BINARY_ACK!=a.type||(b+=a.attachments,b+="-"),a.nsp&&"/"!=a.nsp&&(d=!0,b+=a.nsp),null!=a.id&&(d&&(b+=",",d=!1),b+=a.id),null!=a.data&&(d&&(b+=","),b+=l.stringify(a.data)),k("encoded %j as %s",a,b),b}function f(a,b){function c(a){var c=n.deconstructPacket(a),d=e(c.packet),f=c.buffers;f.unshift(d),b(f)}n.removeBlobs(a,c)}function g(){this.reconstructor=null}function h(a){var b={},d=0;if(b.type=Number(a.charAt(0)),null==c.types[b.type])return j();if(c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type){for(b.attachments="";"-"!=a.charAt(++d);)b.attachments+=a.charAt(d);b.attachments=Number(b.attachments)}if("/"==a.charAt(d+1))for(b.nsp="";++d;){var e=a.charAt(d);if(","==e)break;if(b.nsp+=e,d+1==a.length)break
}else b.nsp="/";var f=a.charAt(d+1);if(""!=f&&Number(f)==f){for(b.id="";++d;){var e=a.charAt(d);if(null==e||Number(e)!=e){--d;break}if(b.id+=a.charAt(d),d+1==a.length)break}b.id=Number(b.id)}if(a.charAt(++d))try{b.data=l.parse(a.substr(d))}catch(g){return j()}return k("decoded %s as %j",a,b),b}function i(a){this.reconPack=a,this.buffers=[]}function j(a){return{type:c.ERROR,data:"parser error"}}var k=a("debug")("socket.io-parser"),l=a("json3"),m=(a("isarray"),a("component-emitter")),n=a("./binary"),o=a("./is-buffer");c.protocol=4,c.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],c.CONNECT=0,c.DISCONNECT=1,c.EVENT=2,c.ACK=3,c.ERROR=4,c.BINARY_EVENT=5,c.BINARY_ACK=6,c.Encoder=d,c.Decoder=g,d.prototype.encode=function(a,b){if(k("encoding packet %j",a),c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)f(a,b);else{b([e(a)])}},m(g.prototype),g.prototype.add=function(a){var b;if("string"==typeof a)b=h(a),c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type?(this.reconstructor=new i(b),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b);else{if(!o(a)&&!a.base64)throw new Error("Unknown type: "+a);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(b=this.reconstructor.takeBinaryData(a))&&(this.reconstructor=null,this.emit("decoded",b))}},g.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},i.prototype.takeBinaryData=function(a){if(this.buffers.push(a),this.buffers.length==this.reconPack.attachments){var b=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),b}return null},i.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":39,"./is-buffer":41,"component-emitter":8,debug:9,isarray:42,json3:43}],41:[function(a,b,c){(function(a){function c(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}b.exports=c}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],42:[function(a,b,c){b.exports=a(33)},{}],43:[function(b,c,d){!function(b){function c(a){if(c[a]!==g)return c[a];var b;if("bug-string-char-index"==a)b="a"!="a"[0];else if("json"==a)b=c("json-stringify")&&c("json-parse");else{var d,e='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==a){var f=k.stringify,i="function"==typeof f&&l;if(i){(d=function(){return 1}).toJSON=d;try{i="0"===f(0)&&"0"===f(new Number)&&'""'==f(new String)&&f(h)===g&&f(g)===g&&f()===g&&"1"===f(d)&&"[1]"==f([d])&&"[null]"==f([g])&&"null"==f(null)&&"[null,null,null]"==f([g,h,null])&&f({a:[d,!0,!1,null,"\0\b\n\f\r\t"]})==e&&"1"===f(null,d)&&"[\n 1,\n 2\n]"==f([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==f(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==f(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==f(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==f(new Date(-1))}catch(n){i=!1}}b=i}if("json-parse"==a){var j=k.parse;if("function"==typeof j)try{if(0===j("0")&&!j(!1)){d=j(e);var m=5==d.a.length&&1===d.a[0];if(m){try{m=!j('"\t"')}catch(n){}if(m)try{m=1!==j("01")}catch(n){}if(m)try{m=1!==j("1.")}catch(n){}}}}catch(n){m=!1}b=m}}return c[a]=!!b}var e,f,g,h={}.toString,i="function"==typeof a&&a.amd,j="object"==typeof JSON&&JSON,k="object"==typeof d&&d&&!d.nodeType&&d;k&&j?(k.stringify=j.stringify,k.parse=j.parse):k=b.JSON=j||{};var l=new Date(-0xc782b5b800cec);try{l=l.getUTCFullYear()==-109252&&0===l.getUTCMonth()&&1===l.getUTCDate()&&10==l.getUTCHours()&&37==l.getUTCMinutes()&&6==l.getUTCSeconds()&&708==l.getUTCMilliseconds()}catch(N){}if(!c("json")){var m="[object Function]",n="[object Date]",o="[object Number]",p="[object String]",q="[object Array]",r="[object Boolean]",s=c("bug-string-char-index");if(!l)var t=Math.floor,u=[0,31,59,90,120,151,181,212,243,273,304,334],v=function(a,b){return u[b]+365*(a-1970)+t((a-1969+(b=+(b>1)))/4)-t((a-1901+b)/100)+t((a-1601+b)/400)};(e={}.hasOwnProperty)||(e=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=h?e=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,e=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,e.call(this,a)});var w={boolean:1,number:1,string:1,undefined:1},x=function(a,b){var c=typeof a[b];return"object"==c?!!a[b]:!w[c]};if(f=function(a,b){var c,d,g,i=0;(c=function(){this.valueOf=0}).prototype.valueOf=0,d=new c;for(g in d)e.call(d,g)&&i++;return c=d=null,i?f=2==i?function(a,b){var c,d={},f=h.call(a)==m;for(c in a)f&&"prototype"==c||e.call(d,c)||!(d[c]=1)||!e.call(a,c)||b(c)}:function(a,b){var c,d,f=h.call(a)==m;for(c in a)f&&"prototype"==c||!e.call(a,c)||(d="constructor"===c)||b(c);(d||e.call(a,c="constructor"))&&b(c)}:(d=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],f=function(a,b){var c,f,g=h.call(a)==m,i=!g&&"function"!=typeof a.constructor&&x(a,"hasOwnProperty")?a.hasOwnProperty:e;for(c in a)g&&"prototype"==c||!i.call(a,c)||b(c);for(f=d.length;c=d[--f];i.call(a,c)&&b(c));}),f(a,b)},!c("json-stringify")){var y={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},z="000000",A=function(a,b){return(z+(b||0)).slice(-a)},B="\\u00",C=function(a){var b,c='"',d=0,e=a.length,f=e>10&&s;for(f&&(b=a.split(""));d<e;d++){var g=a.charCodeAt(d);switch(g){case 8:case 9:case 10:case 12:case 13:case 34:case 92:c+=y[g];break;default:if(g<32){c+=B+A(2,g.toString(16));break}c+=f?b[d]:s?a.charAt(d):a[d]}}return c+'"'},D=function(a,b,c,d,i,j,k){var l,m,s,u,w,x,y,z,B,E,F,G,H,I,J,K;try{l=b[a]}catch(N){}if("object"==typeof l&&l)if((m=h.call(l))!=n||e.call(l,"toJSON"))"function"==typeof l.toJSON&&(m!=o&&m!=p&&m!=q||e.call(l,"toJSON"))&&(l=l.toJSON(a));else if(l>-1/0&&l<1/0){if(v){for(w=t(l/864e5),s=t(w/365.2425)+1970-1;v(s+1,0)<=w;s++);for(u=t((w-v(s,0))/30.42);v(s,u+1)<=w;u++);w=1+w-v(s,u),x=(l%864e5+864e5)%864e5,y=t(x/36e5)%24,z=t(x/6e4)%60,B=t(x/1e3)%60,E=x%1e3}else s=l.getUTCFullYear(),u=l.getUTCMonth(),w=l.getUTCDate(),y=l.getUTCHours(),z=l.getUTCMinutes(),B=l.getUTCSeconds(),E=l.getUTCMilliseconds();l=(s<=0||s>=1e4?(s<0?"-":"+")+A(6,s<0?-s:s):A(4,s))+"-"+A(2,u+1)+"-"+A(2,w)+"T"+A(2,y)+":"+A(2,z)+":"+A(2,B)+"."+A(3,E)+"Z"}else l=null;if(c&&(l=c.call(b,a,l)),null===l)return"null";if((m=h.call(l))==r)return""+l;if(m==o)return l>-1/0&&l<1/0?""+l:"null";if(m==p)return C(""+l);if("object"==typeof l){for(I=k.length;I--;)if(k[I]===l)throw TypeError();if(k.push(l),F=[],J=j,j+=i,m==q){for(H=0,I=l.length;H<I;H++)G=D(H,l,c,d,i,j,k),F.push(G===g?"null":G);K=F.length?i?"[\n"+j+F.join(",\n"+j)+"\n"+J+"]":"["+F.join(",")+"]":"[]"}else f(d||l,function(a){var b=D(a,l,c,d,i,j,k);b!==g&&F.push(C(a)+":"+(i?" ":"")+b)}),K=F.length?i?"{\n"+j+F.join(",\n"+j)+"\n"+J+"}":"{"+F.join(",")+"}":"{}";return k.pop(),K}};k.stringify=function(a,b,c){var d,e,f,g;if("function"==typeof b||"object"==typeof b&&b)if((g=h.call(b))==m)e=b;else if(g==q){f={};for(var i,j=0,k=b.length;j<k;i=b[j++],((g=h.call(i))==p||g==o)&&(f[i]=1));}if(c)if((g=h.call(c))==o){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else g==p&&(d=c.length<=10?c:c.slice(0,10));return D("",(i={},i[""]=a,i),e,f,d,"",[])}}if(!c("json-parse")){var E,F,G=String.fromCharCode,H={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},I=function(){throw E=F=null,SyntaxError()},J=function(){for(var a,b,c,d,e,f=F,g=f.length;E<g;)switch(e=f.charCodeAt(E)){case 9:case 10:case 13:case 32:E++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=s?f.charAt(E):f[E],E++,a;case 34:for(a="@",E++;E<g;)if((e=f.charCodeAt(E))<32)I();else if(92==e)switch(e=f.charCodeAt(++E)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=H[e],E++;break;case 117:for(b=++E,c=E+4;E<c;E++)(e=f.charCodeAt(E))>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70||I();a+=G("0x"+f.slice(b,E));break;default:I()}else{if(34==e)break;for(e=f.charCodeAt(E),b=E;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++E);a+=f.slice(b,E)}if(34==f.charCodeAt(E))return E++,a;I();default:if(b=E,45==e&&(d=!0,e=f.charCodeAt(++E)),e>=48&&e<=57){for(48==e&&(e=f.charCodeAt(E+1))>=48&&e<=57&&I(),d=!1;E<g&&(e=f.charCodeAt(E))>=48&&e<=57;E++);if(46==f.charCodeAt(E)){for(c=++E;c<g&&(e=f.charCodeAt(c))>=48&&e<=57;c++);c==E&&I(),E=c}if(101==(e=f.charCodeAt(E))||69==e){for(e=f.charCodeAt(++E),43!=e&&45!=e||E++,c=E;c<g&&(e=f.charCodeAt(c))>=48&&e<=57;c++);c==E&&I(),E=c}return+f.slice(b,E)}if(d&&I(),"true"==f.slice(E,E+4))return E+=4,!0;if("false"==f.slice(E,E+5))return E+=5,!1;if("null"==f.slice(E,E+4))return E+=4,null;I()}return"$"},K=function(a){var b,c;if("$"==a&&I(),"string"==typeof a){if("@"==(s?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];"]"!=(a=J());c||(c=!0))c&&(","==a?"]"==(a=J())&&I():I()),","==a&&I(),b.push(K(a));return b}if("{"==a){for(b={};"}"!=(a=J());c||(c=!0))c&&(","==a?"}"==(a=J())&&I():I()),","!=a&&"string"==typeof a&&"@"==(s?a.charAt(0):a[0])&&":"==J()||I(),b[a.slice(1)]=K(J());return b}I()}return a},L=function(a,b,c){var d=M(a,b,c);d===g?delete a[b]:a[b]=d},M=function(a,b,c){var d,e=a[b];if("object"==typeof e&&e)if(h.call(e)==q)for(d=e.length;d--;)L(e,d,c);else f(e,function(a){L(e,a,c)});return c.call(a,b,e)};k.parse=function(a,b){var c,d;return E=0,F=""+a,c=K(J()),"$"!=J()&&I(),E=F=null,b&&h.call(b)==m?M((d={},d[""]=c,d),"",b):c}}}i&&a(function(){return k})}(this)},{}],44:[function(a,b,c){function d(a,b){var c=[];b=b||0;for(var d=b||0;d<a.length;d++)c[d-b]=a[d];return c}b.exports=d},{}]},{},[1])(1)}),function(a,b,c){"use strict";!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(d,e){var f,g,h,i,j=function(a){return a&&a.__esModule?a:{default:a}},k=d("./modules/handle-dom"),l=d("./modules/utils"),m=d("./modules/handle-swal-dom"),n=d("./modules/handle-click"),o=d("./modules/handle-key"),p=j(o),q=d("./modules/default-params"),r=j(q),s=d("./modules/set-params"),t=j(s);h=i=function(){function d(a){var b=e;return b[a]===c?r.default[a]:b[a]}var e=arguments[0];if(k.addClass(b.body,"stop-scrolling"),m.resetInput(),e===c)return l.logStr("SweetAlert expects at least 1 attribute!"),!1;var h=l.extend({},r.default);switch(typeof e){case"string":h.title=e,h.text=arguments[1]||"",h.type=arguments[2]||"";break;case"object":if(e.title===c)return l.logStr('Missing "title" argument!'),!1;h.title=e.title;for(var i in r.default)h[i]=d(i);h.confirmButtonText=h.showCancelButton?"Confirm":r.default.confirmButtonText,h.confirmButtonText=d("confirmButtonText"),h.doneFunction=arguments[1]||null;break;default:return l.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof e),!1}t.default(h),m.fixVerticalPosition(),m.openModal();for(var j=m.getModal(),o=j.querySelectorAll("button"),q=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],s=function(a){return n.handleButton(a,h,j)},u=0;u<o.length;u++)for(var v=0;v<q.length;v++){var w=q[v];o[u][w]=s}m.getOverlay().onclick=s,f=a.onkeydown;var x=function(a){return p.default(a,h,j)};a.onkeydown=x,a.onfocus=function(){setTimeout(function(){g!==c&&(g.focus(),g=c)},0)}},h.setDefaults=i.setDefaults=function(a){if(!a)throw new Error("userParams is required");if("object"!=typeof a)throw new Error("userParams has to be a object");l.extend(r.default,a)},h.close=i.close=function(){var d=m.getModal();k.fadeOut(m.getOverlay(),5),k.fadeOut(d,5),k.removeClass(d,"showSweetAlert"),k.addClass(d,"hideSweetAlert"),k.removeClass(d,"visible");var e=d.querySelector(".sa-icon.sa-success");k.removeClass(e,"animate"),k.removeClass(e.querySelector(".sa-tip"),"animateSuccessTip"),k.removeClass(e.querySelector(".sa-long"),"animateSuccessLong");var h=d.querySelector(".sa-icon.sa-error");k.removeClass(h,"animateErrorIcon"),k.removeClass(h.querySelector(".sa-x-mark"),"animateXMark");var i=d.querySelector(".sa-icon.sa-warning");return k.removeClass(i,"pulseWarning"),k.removeClass(i.querySelector(".sa-body"),"pulseWarningIns"),k.removeClass(i.querySelector(".sa-dot"),"pulseWarningIns"),k.removeClass(b.body,"stop-scrolling"),a.onkeydown=f,a.previousActiveElement&&a.previousActiveElement.focus(),g=c,clearTimeout(d.timeout),!0},h.showInputError=i.showInputError=function(a){var b=m.getModal(),c=b.querySelector(".sa-input-error");k.addClass(c,"show");var d=b.querySelector(".sa-error-container");k.addClass(d,"show"),d.querySelector("p").innerHTML=a,b.querySelector("input").focus()},h.resetInputError=i.resetInputError=function(a){if(a&&13===a.keyCode)return!1;var b=m.getModal(),c=b.querySelector(".sa-input-error");k.removeClass(c,"show");var d=b.querySelector(".sa-error-container");k.removeClass(d,"show")},"function"==typeof define&&define.amd?define(function(){return h}):void 0!==a?a.sweetAlert=a.swal=h:void 0!==e&&e.exports&&(e.exports=h)},{"./modules/default-params":2,"./modules/handle-click":3,"./modules/handle-dom":4,"./modules/handle-key":5,"./modules/handle-swal-dom":6,"./modules/set-params":8,"./modules/utils":9}],2:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0});var d={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#AEDEF4",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:""};c.default=d,b.exports=c.default},{}],3:[function(b,c,d){Object.defineProperty(d,"__esModule",{value:!0});var e=b("./utils"),f=(b("./handle-swal-dom"),b("./handle-dom")),g=function(b,c,d){function g(a){o&&c.confirmButtonColor&&(n.style.backgroundColor=a)}var j,k,l,m=b||a.event,n=m.target||m.srcElement,o=-1!==n.className.indexOf("confirm"),p=-1!==n.className.indexOf("sweet-overlay"),q=f.hasClass(d,"visible"),r=c.doneFunction&&"true"===d.getAttribute("data-has-done-function");switch(o&&c.confirmButtonColor&&(j=c.confirmButtonColor,k=e.colorLuminance(j,-.04),l=e.colorLuminance(j,-.14)),m.type){case"mouseover":g(k);break;case"mouseout":g(j);break;case"mousedown":g(l);break;case"mouseup":g(k);break;case"focus":var s=d.querySelector("button.confirm"),t=d.querySelector("button.cancel");o?t.style.boxShadow="none":s.style.boxShadow="none";break;case"click":var u=d===n,v=f.isDescendant(d,n);if(!u&&!v&&q&&!c.allowOutsideClick)break;o&&r&&q?h(d,c):r&&q||p?i(d,c):f.isDescendant(d,n)&&"BUTTON"===n.tagName&&sweetAlert.close()}},h=function(a,b){var c=!0;f.hasClass(a,"show-input")&&((c=a.querySelector("input").value)||(c="")),b.doneFunction(c),b.closeOnConfirm&&sweetAlert.close()},i=function(a,b){var c=String(b.doneFunction).replace(/\s/g,"");"function("===c.substring(0,9)&&")"!==c.substring(9,10)&&b.doneFunction(!1),b.closeOnCancel&&sweetAlert.close()};d.default={handleButton:g,handleConfirm:h,handleCancel:i},c.exports=d.default},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],4:[function(c,d,e){Object.defineProperty(e,"__esModule",{value:!0});var f=function(a,b){return new RegExp(" "+b+" ").test(" "+a.className+" ")},g=function(a,b){f(a,b)||(a.className+=" "+b)},h=function(a,b){var c=" "+a.className.replace(/[\t\r\n]/g," ")+" ";if(f(a,b)){for(;c.indexOf(" "+b+" ")>=0;)c=c.replace(" "+b+" "," ");a.className=c.replace(/^\s+|\s+$/g,"")}},i=function(a){var c=b.createElement("div");return c.appendChild(b.createTextNode(a)),c.innerHTML},j=function(a){a.style.opacity="",a.style.display="block"},k=function(a){if(a&&!a.length)return j(a);for(var b=0;b<a.length;++b)j(a[b])},l=function(a){a.style.opacity="",a.style.display="none"},m=function(a){if(a&&!a.length)return l(a);for(var b=0;b<a.length;++b)l(a[b])},n=function(a,b){for(var c=b.parentNode;null!==c;){if(c===a)return!0;c=c.parentNode}return!1},o=function(a){a.style.left="-9999px",a.style.display="block";var b,c=a.clientHeight;return b="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(a).getPropertyValue("padding-top"),10):parseInt(a.currentStyle.padding),a.style.left="",a.style.display="none","-"+parseInt((c+b)/2)+"px"},p=function(a,b){if(+a.style.opacity<1){b=b||16,a.style.opacity=0,a.style.display="block";var c=+new Date,d=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){a.style.opacity=+a.style.opacity+(new Date-c)/100,c=+new Date,+a.style.opacity<1&&setTimeout(d,b)});d()}a.style.display="block"},q=function(a,b){b=b||16,a.style.opacity=1;var c=+new Date,d=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){a.style.opacity=+a.style.opacity-(new Date-c)/100,c=+new Date,+a.style.opacity>0?setTimeout(d,b):a.style.display="none"});d()},r=function(c){if("function"==typeof MouseEvent){var d=new MouseEvent("click",{view:a,bubbles:!1,cancelable:!0});c.dispatchEvent(d)}else if(b.createEvent){var e=b.createEvent("MouseEvents");e.initEvent("click",!1,!1),c.dispatchEvent(e)}else b.createEventObject?c.fireEvent("onclick"):"function"==typeof c.onclick&&c.onclick()},s=function(b){"function"==typeof b.stopPropagation?(b.stopPropagation(),b.preventDefault()):a.event&&a.event.hasOwnProperty("cancelBubble")&&(a.event.cancelBubble=!0)};e.hasClass=f,e.addClass=g,e.removeClass=h,e.escapeHtml=i,e._show=j,e.show=k,e._hide=l,e.hide=m,e.isDescendant=n,e.getTopMargin=o,e.fadeIn=p,e.fadeOut=q,e.fireClick=r,e.stopEventPropagation=s},{}],5:[function(b,d,e){Object.defineProperty(e,"__esModule",{value:!0});var f=b("./handle-dom"),g=b("./handle-swal-dom"),h=function(b,d,e){var h=b||a.event,i=h.keyCode||h.which,j=e.querySelector("button.confirm"),k=e.querySelector("button.cancel"),l=e.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(i)){for(var m=h.target||h.srcElement,n=-1,o=0;o<l.length;o++)if(m===l[o]){n=o;break}9===i?(m=-1===n?j:n===l.length-1?l[0]:l[n+1],f.stopEventPropagation(h),m.focus(),d.confirmButtonColor&&g.setFocusStyle(m,d.confirmButtonColor)):13===i?("INPUT"===m.tagName&&(m=j,j.focus()),m=-1===n?j:c):27===i&&d.allowEscapeKey===!0?(m=k,f.fireClick(m,h)):m=c}};e.default=h,d.exports=e.default},{"./handle-dom":4,"./handle-swal-dom":6}],6:[function(c,d,e){var f=function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var g=c("./utils"),h=c("./handle-dom"),i=c("./default-params"),j=f(i),k=c("./injected-html"),l=f(k),m=".sweet-alert",n=".sweet-overlay",o=function(){var a=b.createElement("div");for(a.innerHTML=l.default;a.firstChild;)b.body.appendChild(a.firstChild)},p=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){var a=b.querySelector(m);return a||(o(),a=p()),a}),q=function(){var a=p();return a?a.querySelector("input"):void 0},r=function(){return b.querySelector(n)},s=function(a,b){var c=g.hexToRgb(b);a.style.boxShadow="0 0 2px rgba("+c+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},t=function(){var c=p();h.fadeIn(r(),10),h.show(c),h.addClass(c,"showSweetAlert"),h.removeClass(c,"hideSweetAlert"),a.previousActiveElement=b.activeElement,c.querySelector("button.confirm").focus(),setTimeout(function(){h.addClass(c,"visible")},500);var d=c.getAttribute("data-timer");"null"!==d&&""!==d&&(c.timeout=setTimeout(function(){swal.close()},d))},u=function(){var a=p(),b=q();h.removeClass(a,"show-input"),b.value="",b.setAttribute("type",j.default.inputType),b.setAttribute("placeholder",j.default.inputPlaceholder),v()},v=function(a){if(a&&13===a.keyCode)return!1;var b=p(),c=b.querySelector(".sa-input-error");h.removeClass(c,"show");var d=b.querySelector(".sa-error-container");h.removeClass(d,"show")},w=function(){p().style.marginTop=h.getTopMargin(p())};e.sweetAlertInitialize=o,e.getModal=p,e.getOverlay=r,e.getInput=q,e.setFocusStyle=s,e.openModal=t,e.resetInput=u,e.resetInputError=v,e.fixVerticalPosition=w},{"./default-params":2,"./handle-dom":4,"./injected-html":7,"./utils":9}],7:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <button class="confirm" tabIndex="1">OK</button>\n    </div></div>',b.exports=c.default},{}],8:[function(a,b,d){Object.defineProperty(d,"__esModule",{value:!0});var e=a("./utils"),f=a("./handle-swal-dom"),g=a("./handle-dom"),h=["error","warning","info","success","input","prompt"],i=function(a){var b=f.getModal(),d=b.querySelector("h2"),i=b.querySelector("p"),j=b.querySelector("button.cancel"),k=b.querySelector("button.confirm");if(d.innerHTML=a.html?a.title:g.escapeHtml(a.title).split("\n").join("<br>"),i.innerHTML=a.html?a.text:g.escapeHtml(a.text||"").split("\n").join("<br>"),a.text&&g.show(i),a.customClass)g.addClass(b,a.customClass),b.setAttribute("data-custom-class",a.customClass);else{var l=b.getAttribute("data-custom-class");g.removeClass(b,l),b.setAttribute("data-custom-class","")}if(g.hide(b.querySelectorAll(".sa-icon")),a.type&&!e.isIE8()){var m=function(){for(var d=!1,e=0;e<h.length;e++)if(a.type===h[e]){d=!0;break}if(!d)return logStr("Unknown alert type: "+a.type),{v:!1};var i=["success","error","warning","info"],j=c;-1!==i.indexOf(a.type)&&(j=b.querySelector(".sa-icon.sa-"+a.type),g.show(j));var k=f.getInput();switch(a.type){case"success":g.addClass(j,"animate"),g.addClass(j.querySelector(".sa-tip"),"animateSuccessTip"),g.addClass(j.querySelector(".sa-long"),"animateSuccessLong");break;case"error":g.addClass(j,"animateErrorIcon"),g.addClass(j.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":g.addClass(j,"pulseWarning"),g.addClass(j.querySelector(".sa-body"),"pulseWarningIns"),g.addClass(j.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":k.setAttribute("type",a.inputType),k.setAttribute("placeholder",a.inputPlaceholder),g.addClass(b,"show-input"),setTimeout(function(){k.focus(),k.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof m)return m.v}if(a.imageUrl){var n=b.querySelector(".sa-icon.sa-custom");n.style.backgroundImage="url("+a.imageUrl+")",g.show(n);var o=80,p=80;if(a.imageSize){var q=a.imageSize.toString().split("x"),r=q[0],s=q[1];r&&s?(o=r,p=s):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+a.imageSize)}n.setAttribute("style",n.getAttribute("style")+"width:"+o+"px; height:"+p+"px")}b.setAttribute("data-has-cancel-button",a.showCancelButton),a.showCancelButton?j.style.display="inline-block":g.hide(j),b.setAttribute("data-has-confirm-button",a.showConfirmButton),a.showConfirmButton?k.style.display="inline-block":g.hide(k),a.cancelButtonText&&(j.innerHTML=g.escapeHtml(a.cancelButtonText)),a.confirmButtonText&&(k.innerHTML=g.escapeHtml(a.confirmButtonText)),a.confirmButtonColor&&(k.style.backgroundColor=a.confirmButtonColor,f.setFocusStyle(k,a.confirmButtonColor)),b.setAttribute("data-allow-outside-click",a.allowOutsideClick);var t=!!a.doneFunction;b.setAttribute("data-has-done-function",t),a.animation?"string"==typeof a.animation?b.setAttribute("data-animation",a.animation):b.setAttribute("data-animation","pop"):b.setAttribute("data-animation","none"),b.setAttribute("data-timer",a.timer)};d.default=i,b.exports=d.default},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],9:[function(b,c,d){Object.defineProperty(d,"__esModule",{value:!0});var e=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},f=function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?parseInt(b[1],16)+", "+parseInt(b[2],16)+", "+parseInt(b[3],16):null},g=function(){return a.attachEvent&&!a.addEventListener},h=function(b){a.console&&a.console.log("SweetAlert: "+b)},i=function(a,b){a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),b=b||0;var c,d,e="#";for(d=0;3>d;d++)c=parseInt(a.substr(2*d,2),16),c=Math.round(Math.min(Math.max(0,c+c*b),255)).toString(16),e+=("00"+c).substr(c.length);return e};d.extend=e,d.hexToRgb=f,d.isIE8=g,d.logStr=h,d.colorLuminance=i},{}]},{},[1])}(window,document);